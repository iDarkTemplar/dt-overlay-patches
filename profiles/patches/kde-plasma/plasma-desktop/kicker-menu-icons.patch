From 35f4ce8c09994f39bb33d3d61e148de82eb924ec Mon Sep 17 00:00:00 2001
From: "i.Dark_Templar" <darktemplar@dark-templar-archives.net>
Date: Sun, 17 Mar 2019 17:06:25 +0300
Subject: [PATCH] Kicker: add option to make root level icons visible

---
 applets/kicker/package/contents/ui/ConfigGeneral.qml |  7 +++++++
 applets/kicker/plugin/rootmodel.cpp                  | 12 ++++++++----
 2 files changed, 15 insertions(+), 4 deletions(-)

diff --git a/applets/kicker/package/contents/ui/ConfigGeneral.qml b/applets/kicker/package/contents/ui/ConfigGeneral.qml
index 7fc3bebe..bb117377 100644
--- a/applets/kicker/package/contents/ui/ConfigGeneral.qml
+++ b/applets/kicker/package/contents/ui/ConfigGeneral.qml
@@ -45,6 +45,7 @@ Item {
     property alias cfg_appNameFormat: appNameFormat.currentIndex
     property alias cfg_limitDepth: limitDepth.checked
     property alias cfg_alphaSort: alphaSort.checked
+    property alias cfg_showIconsRootLevel: showIconsRootLevel.checked
 
     property alias cfg_recentOrdering: recentOrdering.currentIndex
     property alias cfg_showRecentApps: showRecentApps.checked
@@ -197,6 +198,12 @@ Item {
 
                     text: i18n("Sort alphabetically")
                 }
+
+                CheckBox {
+                    id: showIconsRootLevel
+
+                    text: i18n("Show icons on the root level of the menu")
+                }
             }
         }
 
diff --git a/applets/kicker/plugin/rootmodel.cpp b/applets/kicker/plugin/rootmodel.cpp
index 3cf5676d..f7a605ad 100644
--- a/applets/kicker/plugin/rootmodel.cpp
+++ b/applets/kicker/plugin/rootmodel.cpp
@@ -379,7 +379,7 @@ void RootModel::refresh()
 
     if (m_showRecentContacts) {
         m_recentContactsModel = new RecentContactsModel(this);
-        m_entryList.prepend(new GroupEntry(this, i18n("Recent Contacts"), QString(), m_recentContactsModel));
+        m_entryList.prepend(new GroupEntry(this, i18n("Recent Contacts"), QString("view-history"), m_recentContactsModel));
         ++separatorPosition;
     }
 
@@ -389,7 +389,9 @@ void RootModel::refresh()
                     m_recentOrdering == RecentUsageModel::Recent
                         ? i18n("Recent Documents")
                         : i18n("Often Used Documents"),
-                    QString(),
+                    m_recentOrdering == RecentUsageModel::Recent
+                        ? QString("view-history")
+                        : QString("office-chart-pie"),
                     m_recentDocsModel));
         ++separatorPosition;
     }
@@ -400,7 +402,9 @@ void RootModel::refresh()
                     m_recentOrdering == RecentUsageModel::Recent
                         ? i18n("Recent Applications")
                         : i18n("Often Used Applications"),
-                    QString(),
+                    m_recentOrdering == RecentUsageModel::Recent
+                        ? QString("view-history")
+                        : QString("office-chart-pie"),
                     m_recentAppsModel));
         ++separatorPosition;
     }
@@ -413,7 +417,7 @@ void RootModel::refresh()
     m_systemModel = new SystemModel(this);
 
     if (m_showPowerSession) {
-        m_entryList << new GroupEntry(this, i18n("Power / Session"), QString(), m_systemModel);
+        m_entryList << new GroupEntry(this, i18n("Power / Session"), QString("system-log-out"), m_systemModel);
     }
 
     endResetModel();
-- 
2.19.2

